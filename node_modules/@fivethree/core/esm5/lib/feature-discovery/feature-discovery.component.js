/**
 * @fileoverview added by tsickle
 * Generated from: lib/feature-discovery/feature-discovery.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Platform } from '@ionic/angular';
import { Component, ViewChild, ElementRef, Renderer2, Output, EventEmitter } from '@angular/core';
import { trigger, transition, animate, style } from '@angular/animations';
var FivFeatureDiscovery = /** @class */ (function () {
    function FivFeatureDiscovery(renderer, platform) {
        this.renderer = renderer;
        this.platform = platform;
        this.top = 0;
        this.left = 0;
        this.width = 420;
        this.height = 420;
        this.innerDiameter = 0;
        this.featurePadding = 0;
        this.contentTop = 0;
        this.contentLeft = 0;
        this.contentWidth = 0;
        this.contentHeight = 0;
        this.contentOffset = 0;
        this.animationState = 'hidden';
        this.pulse = 'small';
        this.fivClick = new EventEmitter();
        this.fivBackdropClick = new EventEmitter();
        this.fivClose = new EventEmitter();
        this.fivOpen = new EventEmitter();
        this.fivAnimation = new EventEmitter();
    }
    /**
     * @return {?}
     */
    FivFeatureDiscovery.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @return {?}
     */
    FivFeatureDiscovery.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} bounds
     * @return {?}
     */
    FivFeatureDiscovery.prototype.setBounds = /**
     * @param {?} bounds
     * @return {?}
     */
    function (bounds) {
        this.bounds = bounds;
        this.innerDiameter =
            bounds.height > bounds.width ? bounds.height : bounds.width;
        this.top = bounds.top + bounds.height / 2 - this.height / 2;
        this.left = bounds.left + bounds.width / 2 - this.width / 2;
        this.calculateContentBounds();
        if (!this.icon) {
            /** @type {?} */
            var gradient = "-webkit-radial-gradient(transparent " + (this
                .innerDiameter /
                2 +
                5) + "px, var(--fiv-color-feature) " + (this.innerDiameter / 2 + 5) + "px)";
            /** @type {?} */
            var pulseGradient = "-webkit-radial-gradient(transparent " + (this
                .innerDiameter /
                2 +
                5) + "px, var(--fiv-color-pulse) " + (this.innerDiameter / 2 + 5) + "px)";
            this.renderer.setStyle(this.circle.nativeElement, 'background', gradient);
            this.renderer.setStyle(this.innerPulse.nativeElement, 'background', pulseGradient);
            this.renderer.setStyle(this.outerPulse.nativeElement, 'background', pulseGradient);
        }
    };
    /**
     * @return {?}
     */
    FivFeatureDiscovery.prototype.calculateContentBounds = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var absoluteCenter = {
            x: this.platform.width() / 2,
            y: this.platform.height() / 2
        };
        /** @type {?} */
        var center = {
            x: this.left + this.width / 2,
            y: this.top + this.width / 2
        };
        /** @type {?} */
        var rectWidth = Math.sqrt(Math.pow(this.width, 2) / 2);
        /** @type {?} */
        var isTop = center.y < absoluteCenter.y;
        /** @type {?} */
        var isLeft = center.x < absoluteCenter.x;
        /** @type {?} */
        var innerRadius = this.innerDiameter / 2;
        /** @type {?} */
        var padding = this.featurePadding / 2;
        /** @type {?} */
        var contentRight = 0;
        /** @type {?} */
        var contentBottom = 0;
        if (isLeft) {
            this.contentLeft = center.x - innerRadius;
            contentRight = Math.min(center.x + rectWidth / 2 + this.contentOffset, this.platform.width());
        }
        else {
            this.contentLeft = Math.max(center.x - rectWidth / 2 - this.contentOffset, 0);
            contentRight = center.x + innerRadius;
        }
        if (isTop) {
            this.contentTop = center.y + innerRadius + padding;
            contentBottom = center.y + rectWidth / 2 + -1 * this.contentOffset;
        }
        else {
            this.contentTop = center.y - rectWidth / 2 + this.contentOffset;
            contentBottom = center.y - innerRadius - padding;
        }
        this.contentWidth = Math.abs(this.contentLeft - contentRight);
        this.contentHeight = Math.abs(this.contentTop - contentBottom);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    FivFeatureDiscovery.prototype.handleCircleAnimation = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.fivAnimation.emit(event);
        if (event.toState === 'visible') {
            this.fivOpen.emit();
        }
        if (event.fromState === 'visible' && event.toState === 'hidden') {
            this.fivClose.emit();
        }
        if (event.fromState === 'visible' && event.toState === 'execute') {
            this.fivClose.emit();
        }
    };
    /**
     * @return {?}
     */
    FivFeatureDiscovery.prototype.show = /**
     * @return {?}
     */
    function () {
        this.animationState = 'visible';
    };
    /**
     * @return {?}
     */
    FivFeatureDiscovery.prototype.hide = /**
     * @return {?}
     */
    function () {
        this.animationState = 'hidden';
    };
    /**
     * @return {?}
     */
    FivFeatureDiscovery.prototype.featureClick = /**
     * @return {?}
     */
    function () {
        this.animationState = 'execute';
    };
    /**
     * @param {?} icon
     * @return {?}
     */
    FivFeatureDiscovery.prototype.setIcon = /**
     * @param {?} icon
     * @return {?}
     */
    function (icon) {
        if (icon) {
            this.icon = icon.name;
        }
    };
    FivFeatureDiscovery.decorators = [
        { type: Component, args: [{
                    selector: 'fiv-feature-discovery',
                    template: "<div class=\"backdrop\" (click)=\"fivBackdropClick.emit()\"></div>\n<div [@scale]=\"animationState\" (@scale.done)=\"handleCircleAnimation($event)\" #circle class=\"circle\"\n  [style.height]=\"height + 'px'\" [style.width]=\"width + 'px'\" [style.top]=\"top + 'px'\" [style.left]=\"left + 'px'\">\n  <div #pOuter class=\"feature center pulse\" [style.height]=\"(innerDiameter + featurePadding) + 'px'\"\n    [style.width]=\"(innerDiameter + featurePadding) + 'px'\">\n  </div>\n  <div #pInner class=\"feature center inner  ion-activatable\" (click)=\"fivClick.emit()\"\n    [style.height]=\"(innerDiameter + (icon ? featurePadding : 0)) + 'px'\"\n    [style.width]=\"(innerDiameter + (icon ? featurePadding : 0)) + 'px'\">\n    <fiv-icon class=\"center\" *ngIf=\"icon\" [name]=\"icon\"></fiv-icon>\n    <ion-ripple-effect type=\"unbounded\"></ion-ripple-effect>\n  </div>\n</div>\n<div class=\"content\" *ngIf=\"animationState === 'visible'\" [@contentAnim] [style.width]=\"contentWidth + 'px'\"\n  [style.height]=\"contentHeight + 'px'\" [style.top]=\"contentTop + 'px'\" [style.left]=\"contentLeft + 'px'\">\n  <ng-content></ng-content>\n</div>",
                    animations: [
                        trigger('scale', [
                            transition('* => visible', [
                                style({ transform: 'scale(0)', opacity: '0' }),
                                animate('240ms ease-out', style({ transform: 'scale(1)', opacity: '1' }))
                            ]),
                            transition('visible => hidden', [
                                style({ transform: 'scale(1)', opacity: '1' }),
                                animate('215ms ease-in', style({ transform: 'scale(0)', opacity: '0' }))
                            ]),
                            transition('visible => execute', [
                                style({ transform: 'scale(1)', opacity: '1' }),
                                animate('215ms 0.15s ease-in', style({ transform: 'scale(1.4)', opacity: '0' }))
                            ])
                        ]),
                        trigger('contentAnim', [
                            transition('void => *', [
                                style({ opacity: '0' }),
                                animate('100ms 240ms ease-out', style({ opacity: '1' }))
                            ])
                        ])
                    ],
                    styles: [":host{display:block;height:100vh;width:100vw;position:absolute;--fiv-color-feature:rgba(56, 128, 255, 0.97);--fiv-color-pulse:var(--ion-color-light);--fiv-color-icon:var(--fiv-color-feature, var(--ion-color-primary))}.backdrop{display:block;height:100vh;width:100vw;position:absolute}.circle{position:absolute;border-radius:100%;background:var(--fiv-color-feature);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.feature{border-radius:100%;background:var(--fiv-color-pulse)}.feature.center.pulse{-webkit-animation:1.4s infinite shadow-pulse;animation:1.4s infinite shadow-pulse}@-webkit-keyframes shadow-pulse{0%{transform:scale(1) translate(-50%,-50%);border-radius:100%;box-shadow:0 0 0 0 rgba(0,0,0,.24)}50%{transform:scale(1.1) translate(-45%,-45%)}100%{transform:scale(1) translate(-50%,-50%);border-radius:100%;box-shadow:0 0 0 28px transparent}}@keyframes shadow-pulse{0%{transform:scale(1) translate(-50%,-50%);border-radius:100%;box-shadow:0 0 0 0 rgba(0,0,0,.24)}50%{transform:scale(1.1) translate(-45%,-45%)}100%{transform:scale(1) translate(-50%,-50%);border-radius:100%;box-shadow:0 0 0 28px transparent}}.content{position:absolute}.center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"]
                }] }
    ];
    /** @nocollapse */
    FivFeatureDiscovery.ctorParameters = function () { return [
        { type: Renderer2 },
        { type: Platform }
    ]; };
    FivFeatureDiscovery.propDecorators = {
        circle: [{ type: ViewChild, args: ['circle', { static: false },] }],
        rect: [{ type: ViewChild, args: ['rect', { static: false },] }],
        innerPulse: [{ type: ViewChild, args: ['pInner', { static: false, read: ElementRef },] }],
        outerPulse: [{ type: ViewChild, args: ['pOuter', { static: false },] }],
        fivClick: [{ type: Output }],
        fivBackdropClick: [{ type: Output }],
        fivClose: [{ type: Output }],
        fivOpen: [{ type: Output }],
        fivAnimation: [{ type: Output }]
    };
    return FivFeatureDiscovery;
}());
export { FivFeatureDiscovery };
if (false) {
    /** @type {?} */
    FivFeatureDiscovery.prototype.top;
    /** @type {?} */
    FivFeatureDiscovery.prototype.left;
    /** @type {?} */
    FivFeatureDiscovery.prototype.width;
    /** @type {?} */
    FivFeatureDiscovery.prototype.height;
    /** @type {?} */
    FivFeatureDiscovery.prototype.innerDiameter;
    /** @type {?} */
    FivFeatureDiscovery.prototype.featurePadding;
    /** @type {?} */
    FivFeatureDiscovery.prototype.contentTop;
    /** @type {?} */
    FivFeatureDiscovery.prototype.contentLeft;
    /** @type {?} */
    FivFeatureDiscovery.prototype.contentWidth;
    /** @type {?} */
    FivFeatureDiscovery.prototype.contentHeight;
    /** @type {?} */
    FivFeatureDiscovery.prototype.contentOffset;
    /** @type {?} */
    FivFeatureDiscovery.prototype.bounds;
    /** @type {?} */
    FivFeatureDiscovery.prototype.icon;
    /** @type {?} */
    FivFeatureDiscovery.prototype.circle;
    /** @type {?} */
    FivFeatureDiscovery.prototype.rect;
    /** @type {?} */
    FivFeatureDiscovery.prototype.innerPulse;
    /** @type {?} */
    FivFeatureDiscovery.prototype.outerPulse;
    /** @type {?} */
    FivFeatureDiscovery.prototype.animationState;
    /** @type {?} */
    FivFeatureDiscovery.prototype.pulse;
    /** @type {?} */
    FivFeatureDiscovery.prototype.fivClick;
    /** @type {?} */
    FivFeatureDiscovery.prototype.fivBackdropClick;
    /** @type {?} */
    FivFeatureDiscovery.prototype.fivClose;
    /** @type {?} */
    FivFeatureDiscovery.prototype.fivOpen;
    /** @type {?} */
    FivFeatureDiscovery.prototype.fivAnimation;
    /**
     * @type {?}
     * @private
     */
    FivFeatureDiscovery.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    FivFeatureDiscovery.prototype.platform;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVhdHVyZS1kaXNjb3ZlcnkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGZpdmV0aHJlZS9jb3JlLyIsInNvdXJjZXMiOlsibGliL2ZlYXR1cmUtZGlzY292ZXJ5L2ZlYXR1cmUtZGlzY292ZXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQVcsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuRCxPQUFPLEVBQ0wsU0FBUyxFQUVULFNBQVMsRUFFVCxVQUFVLEVBQ1YsU0FBUyxFQUNULE1BQU0sRUFDTixZQUFZLEVBQ2IsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUVMLE9BQU8sRUFDUCxVQUFVLEVBQ1YsT0FBTyxFQUNQLEtBQUssRUFDTixNQUFNLHFCQUFxQixDQUFDO0FBSTdCO0lBOERFLDZCQUFvQixRQUFtQixFQUFVLFFBQWtCO1FBQS9DLGFBQVEsR0FBUixRQUFRLENBQVc7UUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBNUJuRSxRQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ1IsU0FBSSxHQUFHLENBQUMsQ0FBQztRQUNULFVBQUssR0FBRyxHQUFHLENBQUM7UUFDWixXQUFNLEdBQUcsR0FBRyxDQUFDO1FBQ2Isa0JBQWEsR0FBRyxDQUFDLENBQUM7UUFDbEIsbUJBQWMsR0FBRyxDQUFDLENBQUM7UUFDbkIsZUFBVSxHQUFHLENBQUMsQ0FBQztRQUNmLGdCQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBU2xCLG1CQUFjLEdBQUcsUUFBUSxDQUFDO1FBQzFCLFVBQUssR0FBRyxPQUFPLENBQUM7UUFFTixhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNuQyxxQkFBZ0IsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzNDLGFB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QkFDbkMsU0FBUyxTQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRTs2QkFFdkQsU0FBUyxTQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7MkJBS3JDLE1BQU07bUNBQ04sTUFBTTsyQkFDTixNQUFNOzBCQUNOLE1BQU07K0JBQ04sTUFBTTs7SUEyR1QsMEJBQUM7Q0FBQSxBQXZLRCxJQXVLQztTQXRJWSxtQkFBbUI7OztJQUM5QixrQ0FBUTs7SUFDUixtQ0FBUzs7SUFDVCxvQ0FBWTs7SUFDWixxQ0FBYTs7SUFDYiw0Q0FBa0I7O0lBQ2xCLDZDQUFtQjs7SUFDbkIseUNBQWU7O0lBQ2YsMENBQWdCOztJQUNoQiwyQ0FBaUI7O0lBQ2pCLDRDQUFrQjs7SUFDbEIsNENBQWtCOztJQUNsQixxQ0FBd0I7O0lBQ3hCLG1DQUFhOztJQUNiLHFDQUEyRDs7SUFDM0QsbUNBQXVEOztJQUN2RCx5Q0FDdUI7O0lBQ3ZCLHlDQUErRDs7SUFFL0QsNkNBQTBCOztJQUMxQixvQ0FBZ0I7O0lBRWhCLHVDQUE2Qzs7SUFDN0MsK0NBQXFEOztJQUNyRCx1Q0FBNkM7O0lBQzdDLHNDQUE0Qzs7SUFDNUMsMkNBQTREOzs7OztJQUVoRCx1Q0FBMkI7Ozs7O0lBQUUsdUNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhdGZvcm0sIElvbkljb24gfSBmcm9tICdAaW9uaWMvYW5ndWxhcic7XG5pbXBvcnQge1xuICBDb21wb25lbnQsXG4gIE9uSW5pdCxcbiAgVmlld0NoaWxkLFxuICBBZnRlckNvbnRlbnRJbml0LFxuICBFbGVtZW50UmVmLFxuICBSZW5kZXJlcjIsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgQW5pbWF0aW9uRXZlbnQsXG4gIHRyaWdnZXIsXG4gIHRyYW5zaXRpb24sXG4gIGFuaW1hdGUsXG4gIHN0eWxlXG59IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgRmVhdHVyZVBvc2l0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBGaXZJY29uIH0gZnJvbSAnLi4vaWNvbi9pY29uLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Zpdi1mZWF0dXJlLWRpc2NvdmVyeScsXG4gIHRlbXBsYXRlVXJsOiAnLi9mZWF0dXJlLWRpc2NvdmVyeS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2ZlYXR1cmUtZGlzY292ZXJ5LmNvbXBvbmVudC5zY3NzJ10sXG4gIGFuaW1hdGlvbnM6IFtcbiAgICB0cmlnZ2VyKCdzY2FsZScsIFtcbiAgICAgIHRyYW5zaXRpb24oJyogPT4gdmlzaWJsZScsIFtcbiAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICdzY2FsZSgwKScsIG9wYWNpdHk6ICcwJyB9KSxcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnMjQwbXMgZWFzZS1vdXQnLFxuICAgICAgICAgIHN0eWxlKHsgdHJhbnNmb3JtOiAnc2NhbGUoMSknLCBvcGFjaXR5OiAnMScgfSlcbiAgICAgICAgKVxuICAgICAgXSksXG4gICAgICB0cmFuc2l0aW9uKCd2aXNpYmxlID0+IGhpZGRlbicsIFtcbiAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICdzY2FsZSgxKScsIG9wYWNpdHk6ICcxJyB9KSxcbiAgICAgICAgYW5pbWF0ZSgnMjE1bXMgZWFzZS1pbicsIHN0eWxlKHsgdHJhbnNmb3JtOiAnc2NhbGUoMCknLCBvcGFjaXR5OiAnMCcgfSkpXG4gICAgICBdKSxcbiAgICAgIHRyYW5zaXRpb24oJ3Zpc2libGUgPT4gZXhlY3V0ZScsIFtcbiAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICdzY2FsZSgxKScsIG9wYWNpdHk6ICcxJyB9KSxcbiAgICAgICAgYW5pbWF0ZShcbiAgICAgICAgICAnMjE1bXMgMC4xNXMgZWFzZS1pbicsXG4gICAgICAgICAgc3R5bGUoeyB0cmFuc2Zvcm06ICdzY2FsZSgxLjQpJywgb3BhY2l0eTogJzAnIH0pXG4gICAgICAgIClcbiAgICAgIF0pXG4gICAgXSksXG4gICAgdHJpZ2dlcignY29udGVudEFuaW0nLCBbXG4gICAgICB0cmFuc2l0aW9uKCd2b2lkID0+IConLCBbXG4gICAgICAgIHN0eWxlKHsgb3BhY2l0eTogJzAnIH0pLFxuICAgICAgICBhbmltYXRlKCcxMDBtcyAyNDBtcyBlYXNlLW91dCcsIHN0eWxlKHsgb3BhY2l0eTogJzEnIH0pKVxuICAgICAgXSlcbiAgICBdKVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIEZpdkZlYXR1cmVEaXNjb3ZlcnkgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQge1xuICB0b3AgPSAwO1xuICBsZWZ0ID0gMDtcbiAgd2lkdGggPSA0MjA7XG4gIGhlaWdodCA9IDQyMDtcbiAgaW5uZXJEaWFtZXRlciA9IDA7XG4gIGZlYXR1cmVQYWRkaW5nID0gMDtcbiAgY29udGVudFRvcCA9IDA7XG4gIGNvbnRlbnRMZWZ0ID0gMDtcbiAgY29udGVudFdpZHRoID0gMDtcbiAgY29udGVudEhlaWdodCA9IDA7XG4gIGNvbnRlbnRPZmZzZXQgPSAwO1xuICBib3VuZHM6IEZlYXR1cmVQb3NpdGlvbjtcbiAgaWNvbjogc3RyaW5nO1xuICBAVmlld0NoaWxkKCdjaXJjbGUnLCB7IHN0YXRpYzogZmFsc2UgfSkgY2lyY2xlOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdyZWN0JywgeyBzdGF0aWM6IGZhbHNlIH0pIHJlY3Q6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3BJbm5lcicsIHsgc3RhdGljOiBmYWxzZSwgcmVhZDogRWxlbWVudFJlZiB9KVxuICBpbm5lclB1bHNlOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdwT3V0ZXInLCB7IHN0YXRpYzogZmFsc2UgfSkgb3V0ZXJQdWxzZTogRWxlbWVudFJlZjtcblxuICBhbmltYXRpb25TdGF0ZSA9ICdoaWRkZW4nO1xuICBwdWxzZSA9ICdzbWFsbCc7XG5cbiAgQE91dHB1dCgpIGZpdkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBmaXZCYWNrZHJvcENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBmaXZDbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgZml2T3BlbiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgZml2QW5pbWF0aW9uID0gbmV3IEV2ZW50RW1pdHRlcjxBbmltYXRpb25FdmVudD4oKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgcGxhdGZvcm06IFBsYXRmb3JtKSB7fVxuXG4gIG5nT25Jbml0KCkge31cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKTogdm9pZCB7fVxuXG4gIHNldEJvdW5kcyhib3VuZHM6IEZlYXR1cmVQb3NpdGlvbikge1xuICAgIHRoaXMuYm91bmRzID0gYm91bmRzO1xuICAgIHRoaXMuaW5uZXJEaWFtZXRlciA9XG4gICAgICBib3VuZHMuaGVpZ2h0ID4gYm91bmRzLndpZHRoID8gYm91bmRzLmhlaWdodCA6IGJvdW5kcy53aWR0aDtcbiAgICB0aGlzLnRvcCA9IGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0IC8gMiAtIHRoaXMuaGVpZ2h0IC8gMjtcbiAgICB0aGlzLmxlZnQgPSBib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAvIDIgLSB0aGlzLndpZHRoIC8gMjtcbiAgICB0aGlzLmNhbGN1bGF0ZUNvbnRlbnRCb3VuZHMoKTtcbiAgICBpZiAoIXRoaXMuaWNvbikge1xuICAgICAgY29uc3QgZ3JhZGllbnQgPSBgLXdlYmtpdC1yYWRpYWwtZ3JhZGllbnQodHJhbnNwYXJlbnQgJHt0aGlzXG4gICAgICAgIC5pbm5lckRpYW1ldGVyIC9cbiAgICAgICAgMiArXG4gICAgICAgIDV9cHgsIHZhcigtLWZpdi1jb2xvci1mZWF0dXJlKSAke3RoaXMuaW5uZXJEaWFtZXRlciAvIDIgKyA1fXB4KWA7XG4gICAgICBjb25zdCBwdWxzZUdyYWRpZW50ID0gYC13ZWJraXQtcmFkaWFsLWdyYWRpZW50KHRyYW5zcGFyZW50ICR7dGhpc1xuICAgICAgICAuaW5uZXJEaWFtZXRlciAvXG4gICAgICAgIDIgK1xuICAgICAgICA1fXB4LCB2YXIoLS1maXYtY29sb3ItcHVsc2UpICR7dGhpcy5pbm5lckRpYW1ldGVyIC8gMiArIDV9cHgpYDtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jaXJjbGUubmF0aXZlRWxlbWVudCwgJ2JhY2tncm91bmQnLCBncmFkaWVudCk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgICB0aGlzLmlubmVyUHVsc2UubmF0aXZlRWxlbWVudCxcbiAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICBwdWxzZUdyYWRpZW50XG4gICAgICApO1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgICAgdGhpcy5vdXRlclB1bHNlLm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgcHVsc2VHcmFkaWVudFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgY2FsY3VsYXRlQ29udGVudEJvdW5kcygpIHtcbiAgICBjb25zdCBhYnNvbHV0ZUNlbnRlcjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9ID0ge1xuICAgICAgeDogdGhpcy5wbGF0Zm9ybS53aWR0aCgpIC8gMixcbiAgICAgIHk6IHRoaXMucGxhdGZvcm0uaGVpZ2h0KCkgLyAyXG4gICAgfTtcbiAgICBjb25zdCBjZW50ZXI6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSA9IHtcbiAgICAgIHg6IHRoaXMubGVmdCArIHRoaXMud2lkdGggLyAyLFxuICAgICAgeTogdGhpcy50b3AgKyB0aGlzLndpZHRoIC8gMlxuICAgIH07XG4gICAgY29uc3QgcmVjdFdpZHRoID0gTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMud2lkdGgsIDIpIC8gMik7XG4gICAgY29uc3QgaXNUb3AgPSBjZW50ZXIueSA8IGFic29sdXRlQ2VudGVyLnk7XG4gICAgY29uc3QgaXNMZWZ0ID0gY2VudGVyLnggPCBhYnNvbHV0ZUNlbnRlci54O1xuICAgIGNvbnN0IGlubmVyUmFkaXVzID0gdGhpcy5pbm5lckRpYW1ldGVyIC8gMjtcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5mZWF0dXJlUGFkZGluZyAvIDI7XG4gICAgbGV0IGNvbnRlbnRSaWdodCA9IDA7XG4gICAgbGV0IGNvbnRlbnRCb3R0b20gPSAwO1xuICAgIGlmIChpc0xlZnQpIHtcbiAgICAgIHRoaXMuY29udGVudExlZnQgPSBjZW50ZXIueCAtIGlubmVyUmFkaXVzO1xuICAgICAgY29udGVudFJpZ2h0ID0gTWF0aC5taW4oXG4gICAgICAgIGNlbnRlci54ICsgcmVjdFdpZHRoIC8gMiArIHRoaXMuY29udGVudE9mZnNldCxcbiAgICAgICAgdGhpcy5wbGF0Zm9ybS53aWR0aCgpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRlbnRMZWZ0ID0gTWF0aC5tYXgoXG4gICAgICAgIGNlbnRlci54IC0gcmVjdFdpZHRoIC8gMiAtIHRoaXMuY29udGVudE9mZnNldCxcbiAgICAgICAgMFxuICAgICAgKTtcbiAgICAgIGNvbnRlbnRSaWdodCA9IGNlbnRlci54ICsgaW5uZXJSYWRpdXM7XG4gICAgfVxuICAgIGlmIChpc1RvcCkge1xuICAgICAgdGhpcy5jb250ZW50VG9wID0gY2VudGVyLnkgKyBpbm5lclJhZGl1cyArIHBhZGRpbmc7XG4gICAgICBjb250ZW50Qm90dG9tID0gY2VudGVyLnkgKyByZWN0V2lkdGggLyAyICsgLTEgKiB0aGlzLmNvbnRlbnRPZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udGVudFRvcCA9IGNlbnRlci55IC0gcmVjdFdpZHRoIC8gMiArIHRoaXMuY29udGVudE9mZnNldDtcbiAgICAgIGNvbnRlbnRCb3R0b20gPSBjZW50ZXIueSAtIGlubmVyUmFkaXVzIC0gcGFkZGluZztcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRlbnRXaWR0aCA9IE1hdGguYWJzKHRoaXMuY29udGVudExlZnQgLSBjb250ZW50UmlnaHQpO1xuICAgIHRoaXMuY29udGVudEhlaWdodCA9IE1hdGguYWJzKHRoaXMuY29udGVudFRvcCAtIGNvbnRlbnRCb3R0b20pO1xuICB9XG4gIGhhbmRsZUNpcmNsZUFuaW1hdGlvbihldmVudDogQW5pbWF0aW9uRXZlbnQpIHtcbiAgICB0aGlzLmZpdkFuaW1hdGlvbi5lbWl0KGV2ZW50KTtcbiAgICBpZiAoZXZlbnQudG9TdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICB0aGlzLmZpdk9wZW4uZW1pdCgpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQuZnJvbVN0YXRlID09PSAndmlzaWJsZScgJiYgZXZlbnQudG9TdGF0ZSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgIHRoaXMuZml2Q2xvc2UuZW1pdCgpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQuZnJvbVN0YXRlID09PSAndmlzaWJsZScgJiYgZXZlbnQudG9TdGF0ZSA9PT0gJ2V4ZWN1dGUnKSB7XG4gICAgICB0aGlzLmZpdkNsb3NlLmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICBzaG93KCkge1xuICAgIHRoaXMuYW5pbWF0aW9uU3RhdGUgPSAndmlzaWJsZSc7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuYW5pbWF0aW9uU3RhdGUgPSAnaGlkZGVuJztcbiAgfVxuXG4gIGZlYXR1cmVDbGljaygpIHtcbiAgICB0aGlzLmFuaW1hdGlvblN0YXRlID0gJ2V4ZWN1dGUnO1xuICB9XG5cbiAgc2V0SWNvbihpY29uOiBGaXZJY29uIHwgSW9uSWNvbikge1xuICAgIGlmIChpY29uKSB7XG4gICAgICB0aGlzLmljb24gPSBpY29uLm5hbWU7XG4gICAgfVxuICB9XG59XG4iXX0=